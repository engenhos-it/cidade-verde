'use strict';

var FeedParserStream = require('feedparser');

var FeedParser = function FeedParser(feedparserOptions) {
  var parsedItems = [];
  var feedparser = new FeedParserStream(feedparserOptions);

  feedparser.on('readable', function () {
    var item = void 0;
    while (item = feedparser.read()) {
      parsedItems.push(item);
    }

    return parsedItems;
  }).on('end', function next() {
    this.emit('response', parsedItems);
  });

  return feedparser;
};

module.exports = FeedParser;