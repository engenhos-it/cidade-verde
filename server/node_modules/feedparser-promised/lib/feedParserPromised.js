'use strict';

var request = require('request');
var FeedParser = require('./feedParser');

var parse = function parse(requestOptions, feedparserOptions) {
  return new Promise(function (resolve, reject) {
    var feedparser = new FeedParser(feedparserOptions).on('error', reject).on('response', resolve);

    request.get(requestOptions).on('error', reject).pipe(feedparser);
  });
};

module.exports = { parse: parse };